# 线刷教程

本教程与其他教程一样,是基于QPST 的线刷教程, 主要用途为**救砖**、**降级**。

## 准备资料

* [Qualcomm USB driver](https://github.com/RicardoMullion/Qualcomm_USB_Driver/blob/10037.3/QUD.WIN.1.1_Installer_10037.3_Setup.exe )  安装时一路选择 **Next** 就行， 不过在用户协议那里需要注意先勾选 **accept**.
* [Qualcomm QPST](https://mirrors.lolinet.com/software/windows/Qualcomm/QPST/ ) 选择最新版本下载、解压、安装

### 线刷包

不同的机型线刷包不一样，请自行获取你的线刷包，此处提供部分魅族机型的线刷包

* 16s, 16th, 16th Plus 的百度云[线刷包](https://pan.baidu.com/s/1vaLHIR8GaqaJ1AsqKrTjOQ) 提取码:b5nh. (@最飘得手机)
* 16x 的百度云[线刷包](https://pan.baidu.com/s/1IrEtLLyB-6qlKRw6BEoAmQ), 提取码:uu15 (@Xiaolock)
* 16s, 16s Pro 的天翼云[线刷包](https://cloud.189.cn/t/MvYNVbjyY77f) ,  (访问码:3989)  (@因为我高冷)

## 刷机教程

### 写在前面

**强烈建议先手动备份QCN 再开始线刷!** 步骤在降级教程后面.


这一部分根据@香槟的救砖教程二次修改

>**降级说明:**
>
>1. 此降级方法将会清除所有数据,刷前请做好备份.
>2. 解了bl锁的小伙伴可降级任意版本没有限制,但需要刷入第三方recovery,如有需要可与我联系.

**注**：目前的结论是 MEIZU 16s 可在未解锁的情况下线刷，其他魅族机型需要解锁后才能线刷。线刷不改变解锁状态。	

>**步骤说明:**
>
>1. 将 **QPST**与**高通全系列通用驱动**两个软件在电脑上安装好.
>
>2. 线刷包任意选一个进行解压（注意:多个part 的zip文件有依赖关系,需放在一起, 解压一个就好，解压后的全路径名**禁止有中文字符**）
>
>3. 打开QPST软件(电脑左下角开始找到**QFIL**图标点击进入软件)
>
>4. 打开后选择选择**FlatBuild**如图所示(红框标识处)
>
>5. QPST软件选择**Browse**,找到解包的位置选择**prog_firehose_ddr_provision.elf**文件如图所示: 
>
>6. QPST软件点击**LoadXML**按钮一起选择线刷包内`rawprogram_unsparse0.xml`--`rawprogram_unsparse5.xml` 共六个文件，点击确定，选择好后自动弹窗继续选择 `patch0.xml`--`patch5.xml` 共六个文件，点击确定，如图所示: 
>
>7. QPST软件点击**configuration**进入设置界面,找到**DeviceType**选择**UFS**, 另外，勾选上 **Reset After Download**, 点击 ok 保存设置(图二)
>
>   **注： EMMC 设备如 16x 选择 EMMC.** 不勾选 **Reset After Download** 会导致无法开机， recovery 无法触控。
>
>8. **手机关机,同时按住音量加和音量减键不松手，然后插上数据线连接电脑**，直到电脑有驱动提示，松开音量加和音量减键，待电脑安装好驱动后,看到 QSPT 软件显示驱动设备名(如果QSPT没有自动显示驱动名请点击 SelectPort手动选择)
>
>   **注：无法关机时，插数据线连上电脑，一直按住电源键和音量上和音量下，也可以进入9008模式。**
>
>9. 点击QSPT软件**Download**进入刷机状态,等待屏幕进度条走完，下面显示**DownloadSucceed**后拔掉数据线，长按开机键开机即降级或救砖成功!

## 备份 QCN 教程

0. 在**关于手机**连点**版本号** 5次,

1. 在手机上打开**开发者选项**

2. 在开发者选项打开**USB调试**

3. 下载 [platform-tools](https://dl.google.com/android/repository/platform-tools-latest-windows.zip), 然后解压， 将它放在一个你喜欢的地方，并将路径加入系统环境变量。具体参见[这里](https://sspai.com/post/40471) 或者[这里](https://blog.csdn.net/u013250071/article/details/78416274). 确保你已将它的路径添加到系统环境变量后执行下一步。

4. 打开命令行(cmd 或者 powershell), 输入

   ```
   adb shell
   su
   setprop sys.usb.config diag,adb
   ```

5. 将手机连上电脑

6. 在 **QFIL** 里面显示了 **Qualcomm HS-USB Android DIAG 901D (COM X)** 其中 X 是一个数字.

   选择 工具栏的**Tools > QCN Backup Restore **，选择一个你喜欢的文件夹， 然后选择 **Backup QCN**，等到进度条完了， Status 下面显示 蓝色的**Backup QCN Succeed**就备份完毕了。以后可以选择 **Restore QCN** 来恢复

7. 建议找到你备份好的 QCN, 将它通过邮件发送给你自己，并加入收藏。

## 其他工具

* [QGDP](https://qgdptool.com/category/download ) 

## Todo List

* 补图（等七牛云验证成功之后）



## 参考资料

* [How to Enable Qualcomm Diagnostic Mode](https://stackoverflow.com/questions/58519676/how-to-enable-qualcomm-diagnostic-mode)